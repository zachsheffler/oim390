<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-02-05 Mon 18:11 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="author" content="AKINA-10" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4c7a5bf">1. What is an API?</a></li>
<li><a href="#org186eaa3">2. Authentication</a></li>
<li><a href="#org86d69f5">3. Basic API Usage</a></li>
<li><a href="#org08be9cb">4. Getting this into PowerBI</a></li>
</ul>
</div>
</div>
<div id="outline-container-org4c7a5bf" class="outline-2">
<h2 id="org4c7a5bf"><span class="section-number-2">1.</span> What is an API?</h2>
<div class="outline-text-2" id="text-1">
<p>
The application programmer's interface (API) is a series of methods that are used for one application to communicate with another. This requires a well-structured method of communication that is predefined. APIs are generically any kind of method for two programs to speak to each other, but I'm going to focus on REST, or REpresentional State Transfer, which can handle most use cases and is commonly used. In REST, communication takes place through JSON<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> which is already well-structured and robust to multiple different use cases. These JSON communications take place in plain text and are legible to the programmer, though if everything goes well you'll have minimal exposure to it.
</p>

<p>
REST generally uses HTTP to communicate, which is the same protocol that's used for general web browsing.
</p>

<p>
We're going to use OpenWeatherMap as an example of this. OpenWeatherMap is a free(ish) service which utilizes several of the features of APIs that we're going to want to make use of. As an added bonus, having basic weather data is useful in a broad set of circumstances.<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup> To follow along, go to <a href="http://www.openweathermap.com">http://www.openweathermap.com</a> and create a free account.
</p>
</div>
</div>


<div id="outline-container-org186eaa3" class="outline-2">
<h2 id="org186eaa3"><span class="section-number-2">2.</span> Authentication</h2>
<div class="outline-text-2" id="text-2">
<p>
One downside to HTTP is that it doesn't play too nicely with authentication, which is a problem when we're transmitting data that we want to restrict to certain people, or if we don't want one person to monopolize the computing resources, or both. The way that this gets solved in REST is by using an API key which is a mess of characters that's unique to a user. On OpenWeatherMap, if you click on your name (top-right corner) you'll see a "My API Keys" option; click that and copy the API key. You can see mine below:
</p>


<div id="orgac46a74" class="figure">
<p><img src="./images/1-2-owm_api.png" alt="1-2-owm_api.png" />
</p>
</div>


<p>
You'll note that I blurred part of the API key out, which leads me to the major downside: if an enterprising person sees your API key, they can pretend to be you. On OpenWeatherMap, this probably won't hurt you, but other cases can be problematic. If someone got, say, your OpenAI API key, they could run up a bunch of charges.
</p>

<p>
The way this gets handled is by limniting the access of specific API keys, often called scopes. So I could have an API key that can check my billing status on OpenAI, and then a separate one which allows it to run up charges. That way, if the billing status key gets compromised, it limits the harm.
</p>

<p>
Really, though, if an API key gets exposed, the best thing to do would be to reset it and get a new one. On OpenWeatherMap, you'd have to delete it and then get another one, but in other cases, you can refresh it without deleting it. You would need to update the API key wherever it's used in any case.
</p>

<p>
For now, let's copy the key that's displayed there and put it aside for now.
</p>
</div>
</div>

<div id="outline-container-org86d69f5" class="outline-2">
<h2 id="org86d69f5"><span class="section-number-2">3.</span> Basic API Usage</h2>
<div class="outline-text-2" id="text-3">
<p>
Since REST APIs use HTTP, we can use our web browser to interface with it in the most inefficient use of an API imaginable. The basic format is:
</p>

<p>
<code>http://api.openweathermap.org/data/2.5/weather?q={CITY_NAME}&amp;appid={YOUR_API_KEY}</code>
</p>


<p>
Where <code>{CITY_NAME}</code> is the city, and <code>{YOUR_API_KEY}</code> is .. well, your API key. The curly braces should be deleted, but everything else should remain. So, if I had the API key abc123 and I wanted the weather in Boston, I'd use:
</p>

<p>
<code>http://api.openweathermap.org/data/2.5/weather?q=Boston&amp;appid=abc123</code>
</p>

<p>
And then this is going to return a JSON object; in my case:
</p>

<pre class="example">
{
    "coord": {
        "lon": -71.0598,
        "lat": 42.3584
    },
    "weather": [
        {
            "id": 801,
            "main": "Clouds",
            "description": "few clouds",
            "icon": "02d"
        }
    ],
    "base": "stations",
    "main": {
        "temp": 277.6,
        "feels_like": 273.43,
        "temp_min": 276.05,
        "temp_max": 279.06,
        "pressure": 1011,
        "humidity": 29
    },
    "visibility": 10000,
    "wind": {
        "speed": 5.81,
        "deg": 352,
        "gust": 10.73
    },
    "clouds": {
        "all": 20
    },
    "dt": 1707160667,
    "sys": {
        "type": 2,
        "id": 2013408,
        "country": "US",
        "sunrise": 1707134048,
        "sunset": 1707170537
    },
    "timezone": -18000,
    "id": 4930956,
    "name": "Boston",
    "cod": 200
}
</pre>

<p>
Now, most of this is unintelligible. The important thing is the temp is 277.6 and the time is 17071606667. Now, because this is from one computer to another computer, it's worth noting that the temp is in Kelvin and the time is expressed in the Unix epoch, which is seconds since midnight on January 1st, 1970. But those are both the right answers!
</p>

<p>
Now, if I did this without the API key, I'd get something like this:
</p>

<pre class="example">
{
    "cod": 401,
    "message": "Invalid API key. Please see https://openweathermap.org/faq#error401 for more info."
}
</pre>

<p>
Error codes are expressed as HTTP errors; you're probably familiar with 404 (resource not found; usually the URL is mistyped). Other common codes are 401 (not authorized; what we got above), 400 (the request wasn't formatted correctly), 403 (you're authenticated but not allowed to see that), and 408 (whatever was being done took too long). Any error code that doesn't start with a 4 is <i>probably</i> not your fault, but don't sell yourself short.
</p>
</div>
</div>

<div id="outline-container-org08be9cb" class="outline-2">
<h2 id="org08be9cb"><span class="section-number-2">4.</span> Getting this into PowerBI</h2>
<div class="outline-text-2" id="text-4">
<p>
So, we have our 
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
JavaScript Object Notation; see 1.1 
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
Such as if you wind up in conversation with a midwestern computer and need an impromptu topic to vamp on.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: AKINA-10</p>
<p class="date">Created: 2024-02-05 Mon 18:11</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>